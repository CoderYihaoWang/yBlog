function menu(){const a=document.getElementsByClassName('menu-items-container')[0];a.classList.toggle('responsive')}addEventListener("keydown",a=>{a.ctrlKey&&a.key==="`"&&(setSticky("true"),setCommandOpen("true")),(a.key.toLowerCase()==="escape"||a.key.toLowerCase()==="esc")&&setCommandOpen("false")}),addEventListener("load",()=>{const b=localStorage.getItem("dark");b==null?localStorage.setItem("dark","false"):setDark(b),document.body.style.visibility="visible",document.body.style.opacity=1,document.getElementById("title").addEventListener("click",()=>{toggleCommand()}),document.getElementById("command").addEventListener("change",()=>{const a=document.getElementById("command");handleCommand(a.value),a.value=""});const c=localStorage.getItem("command-open");c==null?localStorage.setItem("command-open","false"):setCommandOpen(c);const d=localStorage.getItem("sticky");d==null?localStorage.setItem("sticky","true"):setSticky(d);const e=localStorage.getItem("toc");e==null?localStorage.setItem("toc","true"):setToc(e);const a=localStorage.getItem("find");a!=null&&a.length>0&&(localStorage.removeItem("find"),findCmd(a))});function info(b){const a=document.getElementsByClassName("command-input")[0];a.classList.remove("error"),a.placeholder=b,a.title=b}function err(b){const a=document.getElementsByClassName("command-input")[0];a.classList.add("error"),a.placeholder=b,a.title=b}function setCommandOpen(b){const a=document.getElementsByClassName("command-container")[0];info("Enter command here (try `help`)"),b==="true"?(a.classList.add("active"),localStorage.setItem("command-open","true"),document.getElementById("command").focus()):(a.classList.remove("active"),localStorage.setItem("command-open","false"))}function toggleCommand(){const a=localStorage.getItem("command-open");a==="true"?setCommandOpen("false"):setCommandOpen("true")}function setDark(a){const b=document.getElementById("root");a==="true"?(b.classList.add("dark"),localStorage.setItem("dark","true")):a==="false"&&(b.classList.remove("dark"),localStorage.setItem("dark","false"))}function toggleDark(){const a=localStorage.getItem("dark");a==="true"?setDark("false"):setDark("true")}function setToc(b){const a=document.getElementsByClassName("article-table-of-contents")[0];if(!a)return;b==="true"?(a.classList.remove("hidden"),localStorage.setItem("toc","true")):(a.classList.add("hidden"),localStorage.setItem("toc","false"))}function toggleToc(){const a=localStorage.getItem("toc");a==="true"?setToc("false"):setToc("true")}function setSticky(b){const a=document.getElementById("root");b==="true"?(a.classList.add("sticky"),localStorage.setItem("sticky","true")):(a.classList.remove("sticky"),localStorage.setItem("sticky","false"))}function handleCommand(c){if(!c)return;const b=c.toLowerCase().split(/\s+/);if(b.length<1)return;const a=b.slice(1);switch(b[0]){case"toc":handleToc(a);break;case"dark":handleDark(a);break;case"pin":handlePin(a);break;case"unpin":handleUnpin(a);break;case"json":handleJson(a);break;case"cd":handleCd(a);break;case"ls":handleLs(a);break;case"find":handleFind(a);break;case"exit":handleExit(a);break;case"help":handleHelp(a);break;default:err("unknown command (see `help`)")}}function handleToc(a){a.length===0?toggleToc():a[0]==="on"?setToc("true"):a[0]==="off"?setToc("false"):err("toc: invalid args")}function handleDark(a){if(a.length===0)toggleDark();else if(a[0]==="on")setDark("true");else if(a[0]==="off")setDark("false");else{err("dark: invalid args");return}info("Enter command here (try `help`)")}function handleCd(a){if(a.length!==1){err("cd: invalid args");return}if(a[0]==="~"||a[0]==="home"){window.location.href=window.baseURL;return}window.location.href=window.baseURL+"/"+a[0]}function handlePin(a){if(a.length!==0){err("pin: invalid args");return}setSticky("true"),info("Enter command here (try `help`)")}function handleUnpin(a){if(a.length!==0){err("unpin: invalid args");return}handleExit(a),info("Enter command here (try `help`)")}function handleExit(a){if(a.length!==0){err("exit: invalid args");return}setSticky("false"),setCommandOpen("false"),info("Enter command here (try `help`)")}function handleJson(a){if(a.length!==0){err("json: invalid args");return}window.location.href=window.baseURL+"/index.json",info("Enter command here (try `help`)")}function handleLs(a){if(a.length===0)window.location.href=window.baseURL+"/tags";else if(a.length>1){err("ls: invalid args");return}else window.location.href=window.baseURL+"/tags#"+a[0];info("Enter command here (try `help`)")}function handleFind(a){window.location.href=window.baseURL+"/blog",localStorage.setItem("find",a.join(" "))}function findCmd(h){const i=h.toLowerCase().split(" ");let a=!1,b=!1,c=!1,e=!1,d=!1,g="",f="";for(const h of i)if(h.startsWith("--"))switch(h.substring(2)){case"title":a=!0;break;case"content":b=!0;break;case"date":c=!0;break;case"featured":e=!0;break;case"regex":d=!0;break;default:err("find: invalid args");return}else h.startsWith("-")?g+=h.substring(1):f=f+' '+h;for(const f of g)switch(f){case"t":a=!0;break;case"c":b=!0;break;case"d":c=!0;break;case"f":e=!0;break;case"r":d=!0;break;default:err("find: invalid args");return}!a&&!b&&!c&&(a=!0,b=!0,c=!0),find(f.trim(),a,b,c,e,d)}function find(b,h,c,d,e,f){const g=document.getElementById("list"),a=document.createElement("ul");info("Searching..."),fetch(`${window.baseURL}/index.json`).then(a=>a.json()).then(a=>filter(a.blog,b,h,c,d,e,f)).then(b=>{const c=document.getElementsByClassName("list-count")[0];return c.textContent=`${b.length} post${b.length===1?"":"s"}`,fillBlog(a,b),g.replaceWith(a),b.length}).then(a=>info(`${a} result${a===1?"":"s"}`)).catch(a=>{err("Error in searching..."),console.error(a)})}function filter(c,b,i,f,g,h,d){if(h&&(c=c.filter(a=>a.Parameters.featured===!0)),b.length===0)return c;const e=new RegExp(b,"i");b=b.toLowerCase();let a=a=>!1;return i&&(d?a=appendFilter(a,a=>e.test(a.Title)):a=appendFilter(a,a=>a.Title.toLowerCase().includes(b))),f&&(d?a=appendFilter(a,a=>e.test(a.Content)):a=appendFilter(a,a=>a.Content.toLowerCase().includes(b))),g&&(d?a=appendFilter(a,a=>e.test(a.PublishDate)):a=appendFilter(a,a=>a.PublishDate.toLowerCase().includes(b))),c.filter(b=>a(b))}function appendFilter(a,b){return function(c){return a(c)||b(c)}}function fillBlog(a,b){for(const c of b){const d=document.createElement("li");d.classList.add("list-item");const e=document.createElement("div");e.classList.add("list-time");const h=document.createElement("span");h.textContent=c.FormattedDate,e.appendChild(h),d.appendChild(e);const f=document.createElement("div"),i=document.createElement("div"),g=document.createElement("a");g.textContent=c.Title,g.href=c.RelPermalink,i.appendChild(g),f.appendChild(i);const j=document.createElement("div");if(c.Parameters.tags)for(const b of c.Parameters.tags){const a=document.createElement("a");a.textContent=b,a.href="/tags#"+b,a.classList.add("tag"),j.appendChild(a)}f.appendChild(j),d.appendChild(f),a.appendChild(d)}}function handleHelp(a){if(a.length===0)window.location.href=window.baseURL+"/help";else if(a.length===1)window.location.href=window.baseURL+"/help#-"+a[0];else{err("help: invalid args");return}info("Enter command here (try `help`)")}